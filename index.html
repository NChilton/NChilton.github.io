<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"nchilton.github.io","root":"/","scheme":"Gemini","version":"7.7.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"flat"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="好好学习，天天向上">
<meta property="og:type" content="website">
<meta property="og:title" content="李杜醉酒">
<meta property="og:url" content="https://nchilton.github.io/index.html">
<meta property="og:site_name" content="李杜醉酒">
<meta property="og:description" content="好好学习，天天向上">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Chilton">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://nchilton.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>李杜醉酒</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">李杜醉酒</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">博客</p>
  </div>

  <div class="site-nav-right"></div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档<span class="badge">32</span></a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签<span class="badge">33</span></a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://nchilton.github.io/2020/02/09/Gerris-tutorial/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Chilton">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="李杜醉酒">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/09/Gerris-tutorial/" class="post-title-link" itemprop="url">Gerris 入门教程</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-02-09 00:00:00" itemprop="dateCreated datePublished" datetime="2020-02-09T00:00:00+08:00">2020-02-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-02-19 00:00:00" itemprop="dateModified" datetime="2020-02-19T00:00:00+08:00">2020-02-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Tutorial/" itemprop="url" rel="index">
                    <span itemprop="name">Tutorial</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>Gerris 是一款用于求解流体流动的软件包，能够准确描述两相流界面形变。其源码采用 C 语言编译，因此 Gerris 脚本可以内嵌标准的 C 语言函数。本文介绍如何写一个简单的 Gerris 脚本，原文请见<a target="_blank" rel="noopener" href="http://gfs.sourceforge.net/tutorial/tutorial/tutorial1.html">此</a>。注意，请确保你已经安装了 Gerris，安装教程可参考我的之前博客。由于 Gerris 在类 Unix 平台下运行，因此你需要熟悉类 Unix 的基本命令。</p>
</blockquote>
<!---more--->

<h2 id="一个简单的脚本文件"><a href="#一个简单的脚本文件" class="headerlink" title="一个简单的脚本文件"></a>一个简单的脚本文件</h2><p>Gerris 输入脚本由<strong>模拟域</strong>，<strong>网格划分与初始条件</strong>，<strong>边界条件</strong>，<strong>固体边界</strong>，<strong>输出内容</strong>和<strong>控制参数与数值算法</strong>几部分组成。注意，Gerris 中求解的是<a href="%E6%97%A0%E9%87%8F%E7%BA%B2"><strong>无量纲化NS 方程</strong></a>，所有物理量都是无量纲的，默认粘度、表面张力等量为 0。</p>
<p>以下以一个初始<strong>随机涡量</strong>的例子说明 Gerris 脚本。在命令窗口输入以下命令新建<code>vorticity.gfs</code>脚本：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir vorticity</span><br><span class="line">cd vorticity</span><br><span class="line">vi vorticity.gfs</span><br></pre></td></tr></table></figure>

<p>粘贴以下内容</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 模拟区域</span></span><br><span class="line"><span class="number">1</span> <span class="number">2</span> GfsSimulation GfsBox GfsGEdge &#123;&#125; &#123;</span><br><span class="line"><span class="comment"># 模拟时间</span></span><br><span class="line">  GfsTime &#123; end = <span class="number">50</span> &#125;</span><br><span class="line"><span class="comment"># 网格划分</span></span><br><span class="line">  GfsRefine <span class="number">6</span></span><br><span class="line"><span class="comment"># 初始条件</span></span><br><span class="line">  GfsInit &#123;&#125; &#123;</span><br><span class="line">    U = (<span class="number">0.5</span> - rand()/(double)RAND_MAX)</span><br><span class="line">    V = (<span class="number">0.5</span> - rand()/(double)RAND_MAX)</span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment"># 输出信息，打印在命令窗口</span></span><br><span class="line">  GfsOutputTime            &#123; istep = <span class="number">10</span>   &#125; stdout</span><br><span class="line">  GfsOutputProjectionStats &#123; istep = <span class="number">10</span>   &#125; stdout</span><br><span class="line">  GfsOutputScalarStats     &#123; istep = <span class="number">10</span>   &#125; stdout &#123; v = Vorticity &#125;</span><br><span class="line"><span class="comment"># 输出信息，写入文件</span></span><br><span class="line">  GfsOutputPPM             &#123; step = <span class="number">0.1</span> &#125; &#123; ppm2gif &gt; vorticity.gif &#125; &#123;</span><br><span class="line">    v = Vorticity </span><br><span class="line">    <span class="built_in">min</span> = -<span class="number">10</span></span><br><span class="line">    <span class="built_in">max</span> =  <span class="number">10</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 边界条件</span></span><br><span class="line">GfsBox &#123;&#125;</span><br><span class="line"><span class="number">1</span> <span class="number">1</span> right</span><br><span class="line"><span class="number">1</span> <span class="number">1</span> top</span><br></pre></td></tr></table></figure>

<p>在命令窗口输入以下以进行运算：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gerris2D vorticity.gfs</span><br></pre></td></tr></table></figure>

<p>运行完后会生成<code>vorticity.gif</code>文件，如下所示：</p>
<p><img src="Gerris-tutorial/vorticity.gif"></p>
<h2 id="模拟域"><a href="#模拟域" class="headerlink" title="模拟域"></a>模拟域</h2><p><code>vorticity.gfs</code>第 1 行<code>1 2 GfsSimulation GfsBox GfsGEdge &#123;&#125; &#123;&#125;</code>由 7 个块组成，定义了模拟域的布局。</p>
<ul>
<li>第 1 个块：定义节点（node）数，如第 1 行中的<code>1</code></li>
<li>第 2 个块：定义连接节点的边（edge）数，如第 1 行中<code>2</code></li>
<li>第 3 个块：定义模拟对象类型，如第 1 行中<code>GfsSimulation</code></li>
<li>第 4 个块：定义节点的默认对象类型，如第 1 行中<code>GfsBox</code></li>
<li>第 5 个块：定义边的对象类型，如第 1 行中的<code>GfsEdge</code></li>
<li>第 6 个块：第 1 个可选参数，如第 1 行中的前一个大括号</li>
<li>第 7 个块：第 2 个可选参数，如第 1 行中的后一个大括号</li>
</ul>
<p>因此该行定义了一个模拟盒子（box），模拟盒子有 2 条边存在连接。</p>
<h2 id="边界条件"><a href="#边界条件" class="headerlink" title="边界条件"></a>边界条件</h2><p>模拟盒子有 2 条边存在连接情况由最后三行</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GfsBox &#123;&#125;</span><br><span class="line"><span class="number">1</span> <span class="number">1</span> right</span><br><span class="line"><span class="number">1</span> <span class="number">1</span> top</span><br></pre></td></tr></table></figure>

<p>定义。模拟盒子的右边（right）和上边（top）与自己相连，这相当于定义了<strong>周期性边界条件</strong>。Gerris 中盒子方向如下定义，默认情况下，二维为正方形，三维为正方体。<code>GfsSimulation</code>以<code>1</code>号盒子的中心为坐标原点，<code>GfsAxi</code>以<code>1</code>号盒子 bottom 边中心为坐标原点。</p>
<p><img src="Gerris-tutorial/box.png"></p>
<p>这个例子采用周期性边界条件，并没有指定如速度入口等边界条件。</p>
<h2 id="网格划分与初始条件"><a href="#网格划分与初始条件" class="headerlink" title="网格划分与初始条件"></a>网格划分与初始条件</h2><p><code>vorticity.gfs</code>第 3 行<code>GfsRefine 6 </code>定义了网格划分，<code>6</code>表示网格细分级别，模拟盒子被划分为 $2^6\times2^6$ 个网格。我们也可以采用<code>GfsRefine 6.*(1. - sqrt (x*x + y*y))</code>定义一个变细分级别的网格。</p>
<p><img src="Gerris-tutorial/mesh.png"></p>
<p>第 4-6 行</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">GfsInit &#123;&#125; &#123;</span><br><span class="line">  U = (<span class="number">0.5</span> - rand()/(double)RAND_MAX)</span><br><span class="line">  V = (<span class="number">0.5</span> - rand()/(double)RAND_MAX)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>定义初始速度条件，其它量如压力等默认情况下都为 0。<code>rand()</code>为 C 语言标准随机函数。</p>
<h2 id="输出内容"><a href="#输出内容" class="headerlink" title="输出内容"></a>输出内容</h2><p> <code>vorticity.gfs</code>第 8-15 行 均为输出内容，其中第 8-10 行为在命令窗口上打印内容，</p>
<p><img src="Gerris-tutorial/output.png"></p>
<p>第 11-15 行为写入模拟结果到<code>vorticity.gif</code>，其中 PPM 为一种图像格式，可用 ACDSee 软件打开。考虑到后期处理，建议输出<code>vtk</code>格式或<code>plt</code>格式，具体可参考<code>GfsOutputSimulation</code><a target="_blank" rel="noopener" href="http://gfs.sourceforge.net/wiki/index.php/GfsOutputSimulation">命令</a>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">GfsOutputSimulation &#123; step = <span class="number">1</span> &#125; name.vtk &#123;</span><br><span class="line"><span class="built_in">format</span> = VTK</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">GfsOutputSimulation &#123; step = <span class="number">1</span> &#125; name.plt &#123;</span><br><span class="line"><span class="built_in">format</span> = Tecplot</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://nchilton.github.io/2020/01/19/Tensor-operation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Chilton">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="李杜醉酒">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/19/Tensor-operation/" class="post-title-link" itemprop="url">张量运算</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-19 00:00:00" itemprop="dateCreated datePublished" datetime="2020-01-19T00:00:00+08:00">2020-01-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-02-19 00:00:00" itemprop="dateModified" datetime="2020-02-19T00:00:00+08:00">2020-02-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Research/" itemprop="url" rel="index">
                    <span itemprop="name">Research</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>在 N-S 方程中，常常会涉及<strong>标量</strong>，<strong>向量</strong>，<strong>张量</strong>。比如压力 $p$ 为标量，速度 $\mathbf{u}$ 为向量，剪切应力 $\boldsymbol{\tau}$ 为张量。考虑三维体系，则标量为 $1\times1$ 的 0 维矩阵，向量为 $3\times1$ 的 1 维矩阵，二维张量为 $3\times3$ 的 2 维矩阵。张量运算涉及梯度运算和散度运算，当然还有旋度计算，此处只讨论梯度运算和散度运算，详细运算可见<a target="_blank" rel="noopener" href="http://dyfluid.com/docs/tensor.html">此</a>。</p>
</blockquote>
<!---more--->

<h2 id="梯度与散度运算"><a href="#梯度与散度运算" class="headerlink" title="梯度与散度运算"></a>梯度与散度运算</h2><p>梯度运算和散度运算可分别用 $\text{grad}(\cdot)=\nabla(\cdot)$ 和 $\text{div}(\cdot)=\nabla\cdot(\cdot)$ 表示。梯度运算相当于升维，散度运算相当于升维降维。比如压力进行梯度运算为：<br>$$<br>\nabla p=\left(\frac{\partial p}{\partial x},\frac{\partial p}{\partial y},\frac{\partial p}{\partial z}\right)^\mathsf{T}.<br>$$<br>由标量升维至向量。对速度 $\mathbf{u}=(u,v,w)^\mathsf{T}$ 进行散度运算为：<br>$$<br>\nabla\cdot\mathbf{u}=\frac{\partial u}{\partial x}+\frac{\partial v}{\partial y}+\frac{\partial w}{\partial z}.<br>$$<br>由向量降维值标量。这里梯度运算符 $\nabla$ 相当于一个向量<br>$$<br>\nabla(\cdot)=\left(\frac{\partial (\cdot)}{\partial x},\frac{\partial (\cdot)}{\partial y},\frac{\partial (\cdot)}{\partial z}\right)^\mathsf{T}.<br>$$</p>
<p>$\nabla p$ 相当于向量与标量相乘，$\nabla\cdot\mathbf{u}$ 相当于向量与向量作点乘（内积）。因此对向量作梯度运算相当于对向量每一个分量作梯度运算，即</p>
<p>$$<br>\nabla \mathbf{u}=\left(\nabla u,\nabla v,\nabla w\right)=\begin{pmatrix} \frac{\partial u}{\partial x} &amp; \frac{\partial v}{\partial x} &amp; \frac{\partial w}{\partial x} \ \frac{\partial u}{\partial y} &amp; \frac{\partial v}{\partial y} &amp; \frac{\partial w}{\partial y} \ \frac{\partial u}{\partial z} &amp; \frac{\partial v}{\partial z} &amp; \frac{\partial w}{\partial z} \end{pmatrix}.<br>$$</p>
<p>由向量升维至张量。同理，对张量作散度运算，相当于张量中每一个列向量分作散度运算，即<br>$$<br>\nabla\cdot(\nabla\mathbf{u})=\left(\nabla\cdot\begin{pmatrix}\frac{\partial u}{\partial x} \ \frac{\partial u}{\partial y} \ \frac{\partial u}{\partial z}  \end{pmatrix},\nabla\cdot\begin{pmatrix}\frac{\partial v}{\partial x} \ \frac{\partial v}{\partial y} \ \frac{\partial v}{\partial z}  \end{pmatrix},\nabla\cdot\begin{pmatrix}\frac{\partial w}{\partial x} \ \frac{\partial w}{\partial y} \ \frac{\partial w}{\partial z}  \end{pmatrix}\right)^\mathsf{T}=\begin{pmatrix}<br>      \frac{\partial}{\partial x}\left(\frac{\partial u}{\partial x}\right)+\frac{\partial}{\partial y}\left(\frac{\partial u}{\partial y}\right)+\frac{\partial}{\partial z}\left(\frac{\partial u}{\partial z}\right)\<br>      \frac{\partial}{\partial x}\left(\frac{\partial v}{\partial x}\right)+\frac{\partial}{\partial y}\left(\frac{\partial v}{\partial y}\right)+\frac{\partial}{\partial z}\left(\frac{\partial v}{\partial z}\right)\<br>      \frac{\partial}{\partial x}\left(\frac{\partial w}{\partial x}\right)+\frac{\partial}{\partial y}\left(\frac{\partial w}{\partial y}\right)+\frac{\partial}{\partial z}\left(\frac{\partial w}{\partial z}\right)\<br>    \end{pmatrix}.<br>$$</p>
<p>由张量降维至向量。</p>
<h2 id="矩阵运算"><a href="#矩阵运算" class="headerlink" title="矩阵运算"></a>矩阵运算</h2><ul>
<li>内积</li>
<li>外积</li>
<li>矩阵乘法</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://nchilton.github.io/2019/11/10/Scaling-parameters-in-EHD-equations/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Chilton">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="李杜醉酒">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/11/10/Scaling-parameters-in-EHD-equations/" class="post-title-link" itemprop="url">两相电流体方程组的无量纲化</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-11-10 00:00:00" itemprop="dateCreated datePublished" datetime="2019-11-10T00:00:00+08:00">2019-11-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-02-24 00:00:00" itemprop="dateModified" datetime="2020-02-24T00:00:00+08:00">2020-02-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Research/" itemprop="url" rel="index">
                    <span itemprop="name">Research</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p> This is a series of lecture notes on the advanced fluid dynamics. This original lectures see <a target="_blank" rel="noopener" href="http://web.mit.edu/1.63/www/lecnote.html">here</a>. This blog introduces how to find scaling and similarity parameters relevant to a problem at hand. Normalization by these scales leads to dimensionless parameters which represent the relative importance of various parts of the full equations. Depending on the magnitudes of these parameters, suitable approximations can be devised which can lead to answers that capture the essence of the problem. As an illustration we use the incompressible fluid of constant density to explain this philosophy and approach.</p>
</blockquote>
<!---more--->

<h2 id="电流体方程组"><a href="#电流体方程组" class="headerlink" title="电流体方程组"></a>电流体方程组</h2><p>前面我们已经得到，对于电流体两相流动，如果物性参数如<strong>特征密度、特征粘度、特征表面张力、特征介电常数和特征电导率</strong>分别为 $\rho,\mu,\gamma,\varepsilon,\sigma$，其它特征参数如<strong>特征长度、特征时间、特征速度、特征压力、特征场强和特征电荷密度</strong>分别为 $L,T,U,P,E_0,\varepsilon E_0/L$，则 NS 方程可无量纲化为<br>$$<br>\boxed{\begin{aligned}\frac{L}{TU}\frac{\partial \mathbf{u}^*}{\partial t^*}+\nabla^<em>\cdot(\mathbf{u}^</em>\otimes\mathbf{u}^*)=&amp;-\frac{P}{\rho U^2}\nabla^<em>p^</em>+\frac{\mu}{\rho UL}\nabla^<em>\cdot<br>(\nabla^</em>\mathbf{u}^*)<br>\<br>&amp;+\frac{\gamma}{\rho U^2L} \kappa^<em>\nabla^</em> c+\frac{\varepsilon E_0^2}{\rho U^2}\left(\rho_e^* \mathbf{E^*}-\frac{1}{2}\mathbf{E^<em>E^</em>}\nabla^<em>\varepsilon^</em>\right)\end{aligned}}.\tag{1}<br>$$</p>
<p>静电方程可无量化为<br>$$<br>\boxed{\nabla^<em>\cdot(\varepsilon^</em>\mathbf{E}^*)=\rho_e^*}.\tag{2}<br>$$<br>电流方程可无量纲化为<br>$$<br>\boxed{\frac{\partial \rho_e^*}{\partial t^*}+\frac{\sigma T}{\varepsilon}\nabla\cdot(\sigma^<em>\mathbf{E}^</em>)+\frac{UT}{L}\nabla^<em>\cdot(\rho_e^</em>\mathbf{u}^*)=0}.\tag{3}<br>$$</p>
<h2 id="无量纲参数选取"><a href="#无量纲参数选取" class="headerlink" title="无量纲参数选取"></a>无量纲参数选取</h2><p>在流体力学中特征长度根据具体物理问题取值，特征时间可从以下几个时间尺度取值</p>
<table>
<thead>
<tr>
<th>特征时间</th>
<th>表达式</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>粘性弛豫时间</td>
<td>$\tau_\mu= (\rho L^2)/\mu$</td>
<td></td>
</tr>
<tr>
<td>毛细时间</td>
<td>$\tau_\gamma=\sqrt{(\rho L^3)/\gamma}$</td>
<td></td>
</tr>
<tr>
<td>表面张力弛豫时间</td>
<td>$\tau_\text{s}=\mu L/\gamma$</td>
<td></td>
</tr>
<tr>
<td>电荷弛豫时间</td>
<td>$\tau_\text{e}=\varepsilon/\sigma$</td>
<td></td>
</tr>
<tr>
<td>电流体流动时间</td>
<td>$\tau_\text{c}=\mu/(\varepsilon E_0^2)$</td>
<td></td>
</tr>
</tbody></table>
<p>通过以上时间尺度可以组合以下无量纲数<br>$$<br>Ca_\text{E}=\frac{\tau_\text{s}}{\tau_c}=\frac{\varepsilon LE_0^2}{\gamma},\ Re_\text{E}=\frac{\tau_e}{\tau_c}=\frac{\varepsilon^2E_0^2}{\sigma \mu}.<br>$$<br>当然纯粹从量纲分析，给出流体的物性参数和特征长度、特征场强，一定可以组合很多个时间尺度参数。目前常用的时间尺度就如上表所示。为了使方程 (1) 和 (3) 简化，特征速度取 $U=L/T$ 则可以大大减少计算量。从压力梯度项系数可以看出，如果取特征压力为 $P=\rho U^2 L$，则该系数可以化为 1。如果取特征时间为 $\tau_\gamma$，则特征压力建议取值为 $P=\gamma/L$；如果特征时间为 $\tau_\text{c}$，则特征压力建议取值为 $P=\varepsilon E_0^2$。比如该<a target="_blank" rel="noopener" href="http://www.nature.com/articles/nphys807">文献</a>特征时间取值为 $\tau_{\gamma}$，特征压力取值为 $\gamma/L$。</p>
<h2 id="建议取值"><a href="#建议取值" class="headerlink" title="建议取值"></a>建议取值</h2><blockquote>
<p>特征长度：$L$，特征时间：$T=\tau_\gamma=\sqrt{(\rho L^3)/\gamma}$，特征速度：$U=L/T$，特征压力：$P=\gamma/L$，特征电荷密度：$\rho_e^0=\varepsilon E_0/L$</p>
</blockquote>
<p>电流体方程组如下：<br>$$<br>\boxed{\begin{aligned}<br>&amp;\frac{\partial \mathbf{u}^*}{\partial t^*}+\nabla^<em>\cdot(\mathbf{u}^</em>\otimes\mathbf{u}^*)=\nabla^<em>p^</em>+Oh\nabla^{<em>2}\mathbf{u}^</em>+\kappa^<em>\nabla^</em> c+Ca_\text{E}\left(\rho_e^* \mathbf{E^*}-\frac{1}{2}\mathbf{E^<em>E^</em>}\nabla^<em>\varepsilon^</em>\right), \<br>&amp;\nabla^<em>\cdot(\varepsilon^</em>\mathbf{E}^*)=\rho_e^*, \<br>&amp;\frac{\partial \rho_e^*}{\partial t^*}+\frac{\tau_\gamma}{\tau_\text{e}}\nabla\cdot(\sigma^<em>\mathbf{E}^</em>)+\nabla^<em>\cdot(\rho_e^</em>\mathbf{u}^*)=0.<br>\end{aligned}}<br>$$<br>其中 $Oh=\mu/\sqrt{\rho L\gamma}$。</p>
<blockquote>
<p>特征长度：$L$，特征时间：$T=\tau_\text{c}=\mu/(\varepsilon E_0^2)$，特征速度：$U=L/T$，特征压力：$P=\varepsilon E_0^2$，特征电荷密度：$\rho_e^0=\varepsilon E_0/L$</p>
</blockquote>
<p>电流体方程组如下：<br>$$<br>\boxed{\begin{aligned}<br>&amp;\frac{\tau_\mu}{\tau_\text{c}}\left(\frac{\partial \mathbf{u}^*}{\partial t^*}+\nabla^<em>\cdot(\mathbf{u}^</em>\otimes\mathbf{u}^*)\right)=\nabla^<em>p^</em>+\nabla^{<em>2}\mathbf{u}^</em>+Ca_\text{E}\kappa^<em>\nabla^</em> c+\left(\rho_e^* \mathbf{E^*}-\frac{1}{2}\mathbf{E^<em>E^</em>}\nabla^<em>\varepsilon^</em>\right), \<br>&amp;\nabla^<em>\cdot(\varepsilon^</em>\mathbf{E}^*)=\rho_e^*, \<br>&amp;\frac{\partial \rho_e^*}{\partial t^*}+\frac{1}{Re_\text{E}}\nabla\cdot(\sigma^<em>\mathbf{E}^</em>)+\nabla^<em>\cdot(\rho_e^</em>\mathbf{u}^*)=0.<br>\end{aligned}}<br>$$<br>注意，该方程组中 $\tau_\mu/\tau_\text{c}=Re，Ca_\text{E}=Re/We$。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://nchilton.github.io/2019/11/09/Lagrangian.and.Eulerian.Description/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Chilton">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="李杜醉酒">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/11/09/Lagrangian.and.Eulerian.Description/" class="post-title-link" itemprop="url">Methods of describing fluid motion</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-11-09 00:00:00" itemprop="dateCreated datePublished" datetime="2019-11-09T00:00:00+08:00">2019-11-09</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Research/" itemprop="url" rel="index">
                    <span itemprop="name">Research</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p> This is a series of lecture notes on the advanced fluid dynamics. This original lectures see <a target="_blank" rel="noopener" href="http://web.mit.edu/1.63/www/lecnote.html">here</a>. This blog introduces two methods of describing fluid motion. One is called Lagrangian, where one follows all fluid particles and describes the variations around each fluid particle along its trajectory. The other is Eulerian, where the variations are described at all fixed stations as a function of time. In the second, different particles pass the same station at different times.</p>
</blockquote>
<!---more--->

<h2 id="Lagrangian-description"><a href="#Lagrangian-description" class="headerlink" title="Lagrangian description"></a>Lagrangian description</h2><p>A particle is identified by its initial position at time $t_0$,<br>$$<br>\mathbf{x}_0=(x_0,y_0,z_0).<br>$$<br>Let<br>$$<br>\mathbf{x}=\mathbf{x}(\mathbf{x}_0,t)<br>$$<br>be the position of the same particle at the later time $t$. A particle position is<br>$$<br>\mathbf{p}=(p_x,p_y,p_z).<br>$$<br>Thus the path of a particle identified by $\mathbf{p}$ is given by:<br>$$<br>\mathbf{x}=\mathbf{x}(\mathbf{p},t).<br>$$<br>Note that $\mathbf{a}$, $t$ are  the independent variables, and $\mathbf{x}_0=(x,y,z)$ are dependent variables.</p>
<p>From the particle position we can calculate the particle velocity:<br>$$<br>\mathbf{v}=\left.\frac{\partial\mathbf{x}}{\partial t}\right|_\mathbf{q},<br>$$<br>as well as the particle acceleration:<br>$$<br>\mathbf{a}=\left.\frac{\partial\mathbf{v}}{\partial t}\right|_\mathbf{q}=\left.\frac{\partial^2\mathbf{a}}{\partial t^2}\right|_\mathbf{q}.<br>$$<br>Other physical quantities such as density $\rho$ and pressure $P$ can also be expressed in terms of $\mathbf{p}$, $t$, e.g.,<br>$$<br>\rho=\rho(\mathbf{p},t),P=P(\mathbf{p},t).<br>$$</p>
<h2 id="Eulerian-description"><a href="#Eulerian-description" class="headerlink" title="Eulerian description"></a>Eulerian description</h2><p>Here we specify the fluid properties (density, velocity, pressure…) at a fixed point and a chosen time. Thus we are dealing with the time records of a property at a fixed measuring<br>probe.<br>$$<br>\mathbf{v}(\mathbf{x},t),\rho(\mathbf{x},t),P(\mathbf{x},t),\ \text{etc.}<br>$$<br>Once a physical property of all particles are known at all times, how do we get the property at all fixed points at all times? In other words, how are the Eulerian and Lagrangian systems related? Suppose first that the Lagrangian information of the velocity of all particles are known :<br>$$<br>\mathbf{v}=\mathbf{v}(\mathbf{p},t),<br>$$<br>then we can integrate the definition<br>$$<br>\frac{\partial\mathbf{x}}{\partial t}=\mathbf{v}(\mathbf{p},t),<br>$$<br>for to get the position of a particle,</p>
<p>…</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://nchilton.github.io/2019/11/08/How-to-nondimensionalize-NS-equations/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Chilton">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="李杜醉酒">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/11/08/How-to-nondimensionalize-NS-equations/" class="post-title-link" itemprop="url">NS 方程的无量纲化</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-11-08 00:00:00" itemprop="dateCreated datePublished" datetime="2019-11-08T00:00:00+08:00">2019-11-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-02-22 00:00:00" itemprop="dateModified" datetime="2020-02-22T00:00:00+08:00">2020-02-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Research/" itemprop="url" rel="index">
                    <span itemprop="name">Research</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p> 许多物理问题，比如风刮过山脉、船在海上行驶等，</p>
</blockquote>
<!---more--->

<h2 id="NS-方程"><a href="#NS-方程" class="headerlink" title="NS 方程"></a>NS 方程</h2><p>NS 方程由质量守恒和动量守恒定理推导而来，质量守恒可表示为：</p>
<p>$$<br>\frac{\partial \rho}{\partial t}+\nabla\cdot(\rho\mathbf{u})=0,<br>$$<br>其中 $\rho$ 为流体密度，$\mathbf{u}$ 为速度矢量。动量守恒可表示为：<br>$$<br>\underbrace{\rho\left(\frac{\partial \mathbf{u}}{\partial t}+\mathbf{u} \cdot \nabla \mathbf{u}\right)}<em>{惯性力}=\underbrace{-\nabla p}</em>{压力}+\underbrace{\nabla \cdot\boldsymbol\tau}_{粘性力}.<br>$$<br>上述动量守恒方程为非守恒形式。将质量守恒方程代入动量守恒方程可得到守恒形式：<br>$$<br>\frac{\partial \rho \mathbf{u}}{\partial t}+\nabla \cdot(\rho \mathbf{u} \otimes\mathbf{u})=-\nabla p+\nabla \cdot \boldsymbol\tau.<br>$$<br>其中 $\otimes$ 表示矩阵乘法，可参考<a href="%E5%BC%A0%E9%87%8F%E8%BF%90%E7%AE%97">张量运算</a>。通常情况下所涉及的流体为不可压缩牛顿流体，则质量守恒方程简化为：<br>$$<br>\boxed{\nabla\cdot\mathbf{u}=0}.<br>$$<br>结合不可压缩牛顿流体的本构方程：<br>$$<br>\boldsymbol\tau=\mu\left(\nabla \mathbf{u}+\nabla \mathbf{u}^{\mathsf{T}}\right),<br>$$<br>动量方程可表示为：<br>$$<br>\frac{\partial \mathbf{u}}{\partial t}+\nabla\cdot(\mathbf{u}\otimes\mathbf{u})=-\nabla \frac{p}{\rho}+\frac{\mu}{\rho}\nabla\cdot\left(\nabla\mathbf{u}+\nabla \mathbf{u}^{\mathsf{T}}\right),<br>$$<br>其中 $\mu$ 为动力粘度（dynamic viscosity），$\mu/\rho$ 可用运动粘度（kinetic viscosity）$\nu$ 表示，则不可压缩牛顿流体动量方程常被写作：<br>$$<br>\boxed{\frac{\partial \mathbf{u}}{\partial t}+\nabla\cdot(\mathbf{u}\otimes\mathbf{u})=-\nabla \frac{p}{\rho}+\nu\nabla\cdot\left(\nabla\mathbf{u}+\nabla \mathbf{u}^{\mathsf{T}}\right)}.<br>$$</p>
<h2 id="无量纲化"><a href="#无量纲化" class="headerlink" title="无量纲化"></a>无量纲化</h2><p>假设我们考察不可压缩牛顿流体，其特征长度为 $L$，特征时间为 $T$，特征速度为 $U$，特征压力为 $P$，则无量纲长度为 $x^*=x/L$，无量纲时间为 $t^*=t/T$，无量纲速度为 $\mathbf{u}^*=\mathbf{u}/U$，无量纲压力为 $p^*=p/P$，无量纲梯度为 $\nabla^*(\cdot)=\nabla(\cdot)\times L$。则质量守恒方程为：<br>$$<br>\frac{\nabla^*}{L}\cdot(\mathbf{u}^*U)=0.<br>$$</p>
<p>即<br>$$<br>\boxed{\nabla^<em>\cdot\mathbf{u}^</em>=0}.<br>$$<br>动量守恒方程为：<br>$$<br>\frac{\partial (\mathbf{u}^* U)}{\partial (t^* T)}+\frac{\nabla^*}{L}\cdot((\mathbf{u}^* U)\otimes(\mathbf{u}^* U))=-\frac{\nabla^*}{L}\left(\frac{p^<em>P}{\rho}\right)+\nu\frac{\nabla^</em>}{L}\cdot<br>\left(\frac{\nabla^*}{L}(\mathbf{u}^* U+{\mathbf{u}^*}^{\mathsf{T}}U)\right),<br>$$<br>即<br>$$<br>\frac{U}{T}\frac{\partial \mathbf{u}^*}{\partial t^*}+\frac{U^2}{L}\nabla^<em>\cdot(\mathbf{u}^</em>\otimes\mathbf{u}^*)=-\frac{P}{\rho L}\nabla^<em>p^</em>+\nu\frac{U}{L^2}\nabla^<em>\cdot<br>(\nabla^</em>\mathbf{u}^*+\nabla^*{\mathbf{u}^*}^{\mathsf{T}}),<br>$$<br>上述方程两边同时乘以 $L/U^2$ 得<br>$$<br>\boxed{\frac{L}{TU}\frac{\partial \mathbf{u}^*}{\partial t^*}+\nabla^<em>\cdot(\mathbf{u}^</em>\otimes\mathbf{u}^*)=-\frac{P}{\rho U^2}\nabla^<em>p^</em>+\frac{\nu}{UL}\nabla^<em>\cdot<br>(\nabla^</em>\mathbf{u}^*+\nabla^*{\mathbf{u}^*}^{\mathsf{T}})},<br>$$<br>通过特征参数可以组合一系列无量纲参数：</p>
<table>
<thead>
<tr>
<th>无量纲数</th>
<th>符号</th>
<th>物理意义</th>
</tr>
</thead>
<tbody><tr>
<td>雷诺数</td>
<td>$Re=\nu/(UL)$</td>
<td>惯性力/粘性力</td>
</tr>
<tr>
<td>斯特劳哈尔数</td>
<td>$St=L/(TU)$</td>
<td>局部加速/对流加速</td>
</tr>
<tr>
<td>韦伯数</td>
<td>$We=(\rho U^2L)/\sigma$</td>
<td>惯性力/表面张力</td>
</tr>
</tbody></table>
<p>通常我们选择 $L/(TU)\sim O(1)$ 和 $P/(\rho U^2) \sim O(1)$，则动量方程简化为：<br>$$<br>\boxed{\frac{\partial \mathbf{u}^*}{\partial t^*}+\nabla^<em>\cdot(\mathbf{u}^</em>\otimes\mathbf{u}^*)=-\nabla^<em>p^</em>+\frac{1}{Re}\nabla^<em>\cdot<br>(\nabla^</em>\mathbf{u}^*+\nabla^*{\mathbf{u}^*}^{\mathsf{T}})}.<br>$$</p>
<p>其中 $\nabla^<em>\cdot({\mathbf{u}^</em>}^{\mathsf{T}})\equiv0$，上式简化为：<br>$$<br>\boxed{\frac{\partial \mathbf{u}^*}{\partial t^*}+\nabla^<em>\cdot(\mathbf{u}^</em>\otimes\mathbf{u}^*)=-\nabla^<em>p^</em>+\frac{1}{Re}\nabla^<em>\cdot(\nabla^</em>\mathbf{u}^*)}.<br>$$</p>
<h2 id="包含表面张力"><a href="#包含表面张力" class="headerlink" title="包含表面张力"></a>包含表面张力</h2><p>如果我们考虑由界面张力驱动的流动问题时，则需要在 NS 方程中增加表面张力项<br>$$<br>\Delta p =  \frac{\mathbf{F}_\sigma}{\text{d}s_1\text{d}s_2}=\sigma\left(\frac{1}{R_1}+\frac{1}{R_2}\right),<br>$$<br>其中 $R_1,R_2$ 为界面两个主轴曲率半径，采用 Continuum Surface Force （CSF）模型描述，表面张力项为<br>$$<br>\mathbf{F}_\sigma=\sigma \kappa \nabla \alpha,<br>$$<br>其中 $c$ 为体积分数，$\kappa$ 为曲率。则包含表面张力项的不可压缩牛顿流体动量方程为<br>$$<br>\boxed{\frac{\partial \mathbf{u}}{\partial t}+\nabla\cdot(\mathbf{u}\otimes\mathbf{u})=-\nabla \frac{p}{\rho}+\nu\nabla\cdot\left(\nabla\mathbf{u}\right)+\frac{\sigma}{\rho}\kappa\nabla c}.<br>$$<br>代入无量纲量得<br>$$<br>\frac{\partial (\mathbf{u}^* U)}{\partial (t^* T)}+\frac{\nabla^*}{L}\cdot((\mathbf{u}^* U)\otimes(\mathbf{u}^* U))=-\frac{\nabla^*}{L}\left(\frac{p^<em>P}{\rho}\right)+\nu\frac{\nabla^</em>}{L}\cdot<br>\left(\frac{\nabla^*}{L}(\mathbf{u}^* U)\right)+\frac{\sigma}{\rho} \frac{\kappa^*}{L}\frac{\nabla^*}{L} c,<br>$$<br>上述方程两边同时乘以 $L/U^2$ 得<br>$$<br>\boxed{\frac{L}{TU}\frac{\partial \mathbf{u}^*}{\partial t^*}+\nabla^<em>\cdot(\mathbf{u}^</em>\otimes\mathbf{u}^*)=-\frac{P}{\rho U^2}\nabla^<em>p^</em>+\frac{\nu}{UL}\nabla^<em>\cdot<br>(\nabla^</em>\mathbf{u}^*)+\frac{\sigma}{\rho U^2L} \kappa^<em>\nabla^</em> c}\tag{1},<br>$$<br>选择 $L/(TU)\sim O(1)$ 和 $P/(\rho U^2) \sim O(1)$，则动量方程简化为：<br>$$<br>\boxed{\frac{\partial \mathbf{u}^*}{\partial t^*}+\nabla^<em>\cdot(\mathbf{u}^</em>\otimes\mathbf{u}^*)=-\nabla^<em>p^</em>+\frac{1}{Re}\nabla^<em>\cdot<br>(\nabla^</em>\mathbf{u}^*)+\frac{1}{We} \kappa^<em>\nabla^</em> c}\tag{2}.<br>$$</p>
<h2 id="Gerris-中动量方程"><a href="#Gerris-中动量方程" class="headerlink" title="Gerris 中动量方程"></a>Gerris 中动量方程</h2><p><a target="_blank" rel="noopener" href="http://gfs.sourceforge.net/wiki/index.php/Main_Page">Gerris</a> 是一款用于精确求解不可压缩牛顿流体流动的偏微分方程求解器，该求解器求解的 <a target="_blank" rel="noopener" href="http://gfs.sourceforge.net/wiki/index.php/FAQ#How_do_variables_defined_in_the_parameter_file_enter_the_equations_solved.3F">NS 方程</a>如下：<br>$$<br>\frac{\text{d} \mathbf{u}}{\text{d} t} = \alpha \left{ - \nabla p + \nabla \cdot ( \mu (\nabla \mathbf{u} + \nabla \mathbf{u}^\mathsf{T})) + \sigma \kappa \delta_s  \mathbf{n} \right} + \mathbf{F}_\text{source}(\mathbf{u}),<br>$$</p>
<p>其中 $\alpha=1/\rho$，可通过命令<a target="_blank" rel="noopener" href="http://gfs.sourceforge.net/wiki/index.php/GfsPhysicalParams"><code>GfsPhysicalParams</code></a>命令定义。$\sigma \kappa \delta_s  \mathbf{n}$ 为表面张力项，$\sigma$ 和 $\kappa$ 为表面张力系数和界面曲率，可分别通过<a target="_blank" rel="noopener" href="http://gfs.sourceforge.net/wiki/index.php/GfsSourceTension"><code>GfsSourceTension</code></a>和<a target="_blank" rel="noopener" href="http://gfs.sourceforge.net/wiki/index.php/GfsVariableCurvature"><code>GfsVariableCurvature</code></a>定义。动力粘度 $\mu$ 由<a target="_blank" rel="noopener" href="http://gfs.sourceforge.net/wiki/index.php/GfsSourceViscosity"><code>GfsSourceViscosity</code></a>定义。尽管 Gerris 中动量方程与标准动量方程一样，似乎可以设定实际的物理参数如 $\mu,\sigma$ 来求解问题，但是这种尝试大部分情况下会求解错误。为了提高计算效率和计算精度，在 Gerris 中所有物理量建议进行无量纲化（实际上是必须的）。对比 Gerris 中动量方程和无量纲的动量方程 (1)，可以得出当动量方程 (1) 取<br>$$<br>\frac{L}{TU}=1,\ \frac{P}{\rho U^2}=\alpha,\ \frac{1}{Re}=\alpha\mu,\ \frac{1}{We}=\alpha\sigma<br>$$<br>时，两个方程就一致了。Gerris 中常常取<br>$$<br>\alpha = 1, \frac{1}{Re}=\mu,\ \frac{1}{We}=\sigma.<br>$$<br>这样 Gerris 中动量方程就与方程 (2) 一致了。这也是为什么 Gerris 中常常取雷诺数倒数和韦伯数倒数作为粘度和表面张力系数。</p>
<h2 id="Gerris-中两相流体"><a href="#Gerris-中两相流体" class="headerlink" title="Gerris 中两相流体"></a>Gerris 中两相流体</h2><p>考虑两相流体，密度、粘度分别为 $\rho_1,\rho_2,\mu_1,\mu_2$，液体 1 为主液体，则密度相关参数 $\alpha$ 为<br>$$<br>\alpha = \frac{1}{c+(1-c)\times(\rho_2/\rho_1)}.<br>$$<br>若给定雷诺数 $Re=\rho_1 UL/\mu_1$，则粘度相关参数 $\mu$ 为<br>$$<br>\mu = \frac{1}{Re}\left(c+(1-c)\times(\mu_2/\mu_1)\right).<br>$$<br>若给定韦伯数 $We=\rho_1 U^2L/\sigma$，则表面张力相关参数 $\sigma$ 为<br>$$<br>\sigma = \frac{1}{We}.<br>$$</p>
<h2 id="包含电场力"><a href="#包含电场力" class="headerlink" title="包含电场力"></a>包含电场力</h2><p>电流体流动问题还需要增加电场力<br>$$<br>F_\text{e}=\rho_e \mathbf{E}-\frac{1}{2}\mathbf{EE}\nabla\varepsilon,<br>$$<br>其中 $\varepsilon$ 为主液体介电常数，设特征电荷密度为 $\rho_\text{e0}$，特征场强为 $E_0$，特征介电常数为 $\varepsilon_1$，则电场力为<br>$$<br>F_\text{e}=\rho_\text{e0}E_0\cdot\rho_e^<em>\mathbf{E}^</em>-\frac{1}{2}E_0^2\mathbf{E^<em>E^</em>}\frac{\varepsilon}{L}\nabla^<em>\varepsilon^</em>,<br>$$<br>如果我们定义特征电荷密度可表示为<br>$$<br>\rho_\text{e0}=\frac{\varepsilon E_0}{L},<br>$$<br>则<br>$$<br>F_\text{e}=\frac{\varepsilon E_0^2}{L}\left(\rho_e^* \mathbf{E^*}-\frac{1}{2}\mathbf{E^<em>E^</em>}\nabla^<em>\varepsilon^</em>\right),<br>$$<br>再代入方程 (1) 可得<br>$$<br>\boxed{\begin{aligned}\frac{L}{TU}\frac{\partial \mathbf{u}^*}{\partial t^*}+\nabla^<em>\cdot(\mathbf{u}^</em>\otimes\mathbf{u}^*)=&amp;-\frac{P}{\rho U^2}\nabla^<em>p^</em>+\frac{\nu}{UL}\nabla^<em>\cdot<br>(\nabla^</em>\mathbf{u}^*)<br>\<br>&amp;+\frac{\sigma}{\rho U^2L} \kappa^<em>\nabla^</em> c+\frac{\varepsilon E_0^2}{\rho U^2}\left(\rho_e^* \mathbf{E^*}-\frac{1}{2}\mathbf{E^<em>E^</em>}\nabla^<em>\varepsilon^</em>\right)\end{aligned}}\tag{3},<br>$$<br>方程 (3) 特别重要，相对于原始的 NS 方程，一是做了电荷密度的重定义（其他物理参数是直接选取一个值，而不是组合已有参数），二是两相流体假设密度可以先提取出来。</p>
<p>如果选取特征时间<br>$$<br>T=\left(\frac{\rho L^3}{\gamma}\right)^{1/2},<br>$$<br>特征速度 $U=L/T$，特征压力<br>$$<br>P=\frac{\gamma}{L},<br>$$<br>则方程 (3) 可化简为<br>$$<br>\boxed{\begin{aligned}\frac{\partial \mathbf{u}^*}{\partial t^*}+\nabla^<em>\cdot(\mathbf{u}^</em>\otimes\mathbf{u}^*)=&amp;-\nabla^<em>p^</em>+Oh\nabla^<em>\cdot<br>(\nabla^</em>\mathbf{u}^*)\<br>&amp;+\kappa^<em>\nabla^</em> c+Ca_\text{E}\left(\rho_e^* \mathbf{E^*}-\frac{1}{2}\mathbf{E^<em>E^</em>}\nabla^<em>\varepsilon^</em>\right)\end{aligned}},\tag{4}<br>$$<br>其中 $Oh,Ca_\text{E}$ 分别为奥内佐格数和电场毛系数，可表示为<br>$$<br>Oh=\frac{\mu}{\sqrt{\rho L \gamma}},\ Ca_\text{E}=\frac{\varepsilon L E^2}{\gamma}.<br>$$<br>方程 (4) 适用于电场下液滴行为研究。</p>
<p>如果选取特征速度<br>$$<br>U = \frac{\varepsilon L E_0^2}{\mu},<br>$$<br>特征压力<br>$$<br>P=\varepsilon E_0^2,<br>$$<br>特征时间 $T=\tau_\text{P}$，则方程 (3) 可简化为<br>$$<br>\boxed{\begin{aligned}<br>\frac{\tau_\mu}{\tau_\text{P}}\frac{\partial \mathbf{u}^*}{\partial t^*}+Re\nabla^<em>\cdot(\mathbf{u}^</em>\otimes\mathbf{u}^*)=&amp;-\nabla^<em>p^</em>+\nabla^<em>\cdot<br>(\nabla^</em>\mathbf{u}^*)\<br>&amp;+\frac{Re}{We}\kappa^<em>\nabla^</em> c+(\rho_e^* \mathbf{E^*}-\frac{1}{2}\mathbf{E^<em>E^</em>}\nabla^<em>\varepsilon^</em>)<br>\end{aligned}},\tag{5}<br>$$<br>其中 $\tau_\mu$ 是粘性弛豫时间，可表示为<br>$$<br>\tau_\mu = \frac{\rho L^2}{\mu}.<br>$$</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://nchilton.github.io/2019/11/04/OOE.English.Writing.02/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Chilton">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="李杜醉酒">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/11/04/OOE.English.Writing.02/" class="post-title-link" itemprop="url">How to write an email in English</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-11-04 00:00:00" itemprop="dateCreated datePublished" datetime="2019-11-04T00:00:00+08:00">2019-11-04</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Learning/" itemprop="url" rel="index">
                    <span itemprop="name">Learning</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>This is a  series of my lecture notes about English writing. The English writing lessons are on <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/av52634595">Bilibili</a>. This blog is the second lecture note about how to write an email in English. Other notes see follows:</p>
<p><a href="https://nchilton.github.io/2019/11/02/OOE.English.Writing.01/">lesson1</a>, lesson 3, lesson4, lesson5, lesson 6, lesson7, lesson8, lesson 9, lesson 10.</p>
</blockquote>
<!---more--->

<p>A email starts with a greeting such as Dear Lina. Then you should explain why you are writing. Usually, a single sentence is OK. Next you need add details to your topic in a short paragraph. Finally, adding a call to action to your email and an appropriate sign-off is necessary.</p>
<h2 id="Email-greetings"><a href="#Email-greetings" class="headerlink" title="Email greetings"></a>Email greetings</h2><ul>
<li>Formal: Dear + name</li>
<li>Neutral: Hello/Hi + name</li>
<li>Informal: Hi/Hey, or no greeting</li>
</ul>
<h2 id="Explaining-why-you’re-writing"><a href="#Explaining-why-you’re-writing" class="headerlink" title="Explaining why you’re writing"></a>Explaining why you’re writing</h2><ul>
<li><p>Opening sentences:</p>
<ul>
<li>I’m writing regarding…</li>
<li>I wanted to follow up on…</li>
<li>I would like to ask about…</li>
<li>I’m concerned about…</li>
<li>I need to bring something to your attention…</li>
</ul>
</li>
<li><p>Informal opening sentences</p>
<ul>
<li>Do you know when the database issues will be fixed?</li>
<li>Let’s confirm our plans for this month.</li>
<li>How will the new budget affect our department?</li>
</ul>
</li>
</ul>
<h2 id="Adding-detail"><a href="#Adding-detail" class="headerlink" title="Adding detail"></a>Adding detail</h2><ul>
<li>What problems you want to ask</li>
</ul>
<blockquote>
<p> I’m writing regarding the issues we’ve been having with our database.</p>
<p>Both clients and staff have been experiencing severe problems for several days now. We are unable to update records or access information on customer interactions. This is costing us large amounts of money, both in time spent trying to fix the problem, and in lost sales.</p>
</blockquote>
<h2 id="Changing-topic"><a href="#Changing-topic" class="headerlink" title="Changing topic"></a>Changing topic</h2><ul>
<li>There’s one more thing I’d like to discuss with you.</li>
<li>Regarding…</li>
<li>I’d also like to ask you about…</li>
</ul>
<h2 id="Adding-a-call"><a href="#Adding-a-call" class="headerlink" title="Adding a call"></a>Adding a call</h2><ul>
<li>Adding a call to action to your email<ul>
<li>Please … by tomorrow at the latest.</li>
<li>As a matter of urgency, you need to…</li>
<li>Could you please…?</li>
<li>I would like you to…</li>
<li>I suggest that you…</li>
<li>Can I ask you…</li>
<li>This is just to keep you updated.</li>
<li>This doesn’t require any immediate response, but please keep an eye on the situation.</li>
</ul>
</li>
</ul>
<h2 id="Adding-a-sign-off"><a href="#Adding-a-sign-off" class="headerlink" title="Adding a sign-off"></a>Adding a sign-off</h2><ul>
<li>Informal sign-offs<ul>
<li>Regards,</li>
<li>Best Wishes,</li>
<li>Kind Regards,</li>
</ul>
</li>
<li>Informal sign-offs<ul>
<li>Cheers,</li>
<li>Take care,</li>
</ul>
</li>
</ul>
<h2 id="Writing-an-email-in-English"><a href="#Writing-an-email-in-English" class="headerlink" title="Writing an email in English"></a>Writing an email in English</h2><ul>
<li>Using an appropriate greeting.</li>
<li>Introduce your topic in a single sentence.</li>
<li>Add details to your topic in a short paragraph.</li>
<li>Add a call-to-action to explain what you need the other person to do.</li>
<li>Use an appropriate sign-off.</li>
</ul>
<blockquote>
<p>Dear Lina,</p>
<p>I need to bring something to your attention: many staff are using very weak passwords on their laptops and for database access.</p>
<p>Our work depends on keeping our client’s personal financial information safe. If we lose our clients’ trust on this issue, it will not be easy to recover. I trust that you can see that it is better to take cation now, rather than after something goes wrong.</p>
<p>I suggest we make a rule that passwords must be a specific length, and that staff must change their passwords at least once a month. Please let me know what you think about this.</p>
<p>Regards,</p>
<p>Vijay</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://nchilton.github.io/2019/11/02/OOE.English.Writing.01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Chilton">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="李杜醉酒">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/11/02/OOE.English.Writing.01/" class="post-title-link" itemprop="url">How to improve your English writing</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-11-02 00:00:00" itemprop="dateCreated datePublished" datetime="2019-11-02T00:00:00+08:00">2019-11-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Learning/" itemprop="url" rel="index">
                    <span itemprop="name">Learning</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>This is a  series of my lecture notes about English writing. The English writing lessons are on <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/av52634595">Bilibili</a>. This blog is the first lecture note about <strong>how to improve your English writing</strong>. Other notes see follows:</p>
<p>lesson2, lesson 3, lesson4, lesson5, lesson 6, lesson7, lesson8, lesson 9, lesson 10.</p>
<p>ps. </p>
</blockquote>
<!---more--->

<p>Before your writing, you need know what you write for or what you want to achieve.  Then you need plan your writing. What idea you should include and what idea you need leave out? You need know your goal and what your reader need. Next you need organize your ideas into clear paragraphs.  Usually one main idea is in per paragraph. Cutting empty words and sentences, as well as using short simple sentence where possible (about 10 words in a sentence) are a good habit. Finally, it’s important to put your subject at the start of the sentence. </p>
<p>Below is my notes: </p>
<h2 id="Part-one"><a href="#Part-one" class="headerlink" title="Part one"></a>Part one</h2><blockquote>
<p>Understand your audience</p>
</blockquote>
<ul>
<li>Who are you writing for?</li>
<li>What are you trying to achieve?</li>
<li>What does your reader want?</li>
</ul>
<h2 id="Part-two"><a href="#Part-two" class="headerlink" title="Part two"></a>Part two</h2><blockquote>
<p>Planning your writing</p>
</blockquote>
<ul>
<li>What ides are you going to include?</li>
<li>What ideas are you going to leave out?</li>
<li>How are you going to organize your idea?</li>
</ul>
<h2 id="Part-three"><a href="#Part-three" class="headerlink" title="Part three"></a>Part three</h2><blockquote>
<p>Deciding what to including</p>
</blockquote>
<ul>
<li>Think about your goal</li>
<li>Think about your reader’s needs</li>
</ul>
<h2 id="Part-four"><a href="#Part-four" class="headerlink" title="Part four"></a>Part four</h2><blockquote>
<p>Using paragraphs</p>
</blockquote>
<ul>
<li>One main idea per paragraph</li>
<li>Don’t try to do too much in one paragraph</li>
<li>There’s no minimum length for a paragraph!</li>
</ul>
<blockquote>
<p>Write as little as possible</p>
</blockquote>
<ul>
<li><del>very tired</del>, exhausted</li>
<li><del>as a result</del>, consequently</li>
<li>This will <del>get better</del> improve in the future</li>
</ul>
<h2 id="Part-five"><a href="#Part-five" class="headerlink" title="Part five"></a>Part five</h2><blockquote>
<p>Use short, simple sentences where possible</p>
</blockquote>
<ul>
<li>10 words is good target</li>
<li>20+ words could be dangerous</li>
<li>Don’t use the passive voice unless you need to ???</li>
<li>Put your subject at the start of the sentence</li>
<li>Don’t use relative clauses unless you really need to</li>
<li>Consider breaking longer sentences into shorter ones</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://nchilton.github.io/2019/06/24/Equations.in.Gerris/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Chilton">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="李杜醉酒">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/06/24/Equations.in.Gerris/" class="post-title-link" itemprop="url">Some equations in Gerris</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-06-24 00:00:00" itemprop="dateCreated datePublished" datetime="2019-06-24T00:00:00+08:00">2019-06-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-25 00:00:00" itemprop="dateModified" datetime="2019-10-25T00:00:00+08:00">2019-10-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Research/" itemprop="url" rel="index">
                    <span itemprop="name">Research</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p> <a target="_blank" rel="noopener" href="http://gfs.sourceforge.net/wiki/index.php/Main_Page"><strong>Gerris</strong></a> is a Free Software program for the solution of the partial differential equations describing fluid flow. It has many features such as  the adaptive mesh refinement,  an accurate surface tension model and  the multiphase electrohydrodynamics. Now it stops updating and a new substitute project Basilisk sees <a target="_blank" rel="noopener" href="http://basilisk.fr/">here</a>. This blog lists some equations/solvers in Gerris. It is very useful to define the density, the viscosity, and the surface tension, etc.</p>
</blockquote>
<!---more--->

<h2 id="Incompressible-NS-solver"><a href="#Incompressible-NS-solver" class="headerlink" title="Incompressible NS solver"></a>Incompressible NS solver</h2><p> The incompressible, variable-density Navier–Stokes equation is given by</p>
<p>$$<br>\frac{\partial \mathbf{u}}{\partial t}+\mathbf{u}\cdot\nabla\mathbf{u}=\frac{1}{\rho}\left[-\nabla p + \nabla\cdot(2\mu\mathbf{D})\right]+\mathbf{F}_\text{s}<br>$$</p>
<p>with the deformation tensor $\mathbf{D}=\left[\nabla\mathbf{u}+(\nabla\mathbf{u})^\mathsf{T}\right]/2$. $\rho$ and $\mu$ are the density and the dynamic viscosity, respectively. They are spectified by Gerris command   <a target="_blank" rel="noopener" href="http://gfs.sourceforge.net/wiki/index.php/GfsPhysicalParams">GfsPhysicalParams</a>  and <a target="_blank" rel="noopener" href="http://gfs.sourceforge.net/wiki/index.php/GfsSourceViscosity">GfsSourceViscosity</a>, for example,</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GfsPhysicalParams &#123; alpha = 1./RHO(T) &#125; # RHO(T) is the density</span><br><span class="line">GfsSourceViscosity 1e-2*MU(T) # viscosity</span><br></pre></td></tr></table></figure>

<p><strong>It is noted that the physical unit in Gerris is dimensionless.</strong> The unit rule sees here.</p>
<h2 id="Surface-tension"><a href="#Surface-tension" class="headerlink" title="Surface tension"></a>Surface tension</h2><p> Surface tension can be expressed as the interfacial force density</p>
<p>$$<br>\mathbf{F}_\text{s} = \phi\nabla f<br>$$</p>
<p>with $f$  the volume fraction describing the interface and the potential</p>
<p>$$<br>\phi=\sigma\kappa<br>$$</p>
<p>with $\sigma$  the (constant) surface tension coefficient and $\kappa$ the interface mean curvature. $\sigma$ is defined by  <a target="_blank" rel="noopener" href="http://gfs.sourceforge.net/wiki/index.php/GfsSourceTension">GfsSourceTension</a>, for example,</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GfsSourceTension T 1 K # 1 is the surface tension</span><br></pre></td></tr></table></figure>

<h2 id="Electrohydrodynamic-stresses"><a href="#Electrohydrodynamic-stresses" class="headerlink" title="Electrohydrodynamic stresses"></a>Electrohydrodynamic stresses</h2><p>The EHD force, $\mathbf{F}_\text{e}$, can be computed as the divergence of the Maxwell stress tensor</p>
<p>$$<br>M_{ij}=\varepsilon(E_i E_j-\frac{E^2}{2}\delta_{ij}),<br>$$</p>
<p>where $E_i$ is the $i$-component of the electric field, $\mathbf{E}=-\nabla \phi$ and $\delta_{ij}$ is the Kronecker delta. Then the EHD force can be expressed as</p>
<p>$$<br>\mathbf{F}_e=\nabla\cdot\mathbf{M}=\rho_e\mathbf{E}-\frac{1}{2}E^2\nabla\varepsilon.<br>$$</p>
<p>Adding electric volumetric forces to the momentum equation uses </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SourceElectric</span><br><span class="line">SourceDiffusionExplicit Rhoe K Phi # K is the </span><br><span class="line"># Electric parameters</span><br><span class="line">perm = (Q*T + (1. - T)) # permittivity</span><br><span class="line">charge = Rhoe # charge density</span><br></pre></td></tr></table></figure>

<h2 id="Ohmic-conduction"><a href="#Ohmic-conduction" class="headerlink" title="Ohmic conduction"></a>Ohmic conduction</h2><p>The conservation equation of the bulk free charge is imposed<br>$$<br>\frac{\partial \rho_e}{\partial t}+\nabla\cdot\mathbf{J}=0,\<br>\mathbf{J}=K\mathbf{E}+\rho_e\mathbf{u}.<br>$$<br>This function approximates implicitly the EHD equation set given by the electric Poisson equation and the ohmic conduction term of the charge density conservation (the advection term is computed elsewhere using a tracer advection scheme),<br>$$<br>\nabla \cdot( \varepsilon \nabla \phi^{n+1}) = -\rho_e^{n+1} \quad \mathrm{and} \quad (\rho_e^{n+1}-\rho_e^n) = \Delta t\nabla \cdot (K\nabla \phi^{n+1})<br>$$</p>
<p>where $\rho_\text{e}$ is the charge density, and $\phi$ is the electric potential. $K$ and $\varepsilon$ are the conductivity and permittivity respectively. Substituting the Poisson equation into the conservation equation gives the following time-implicit scheme, </p>
<p>$$<br>\nabla \cdot [(K , \Delta t + \epsilon) \nabla \phi^{n+1}] = -\rho_e^{n}<br>$$</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://nchilton.github.io/2019/04/12/Taylor.G.I/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Chilton">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="李杜醉酒">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/12/Taylor.G.I/" class="post-title-link" itemprop="url">杰弗里·泰勒</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-04-12 00:00:00" itemprop="dateCreated datePublished" datetime="2019-04-12T00:00:00+08:00">2019-04-12</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Reading/" itemprop="url" rel="index">
                    <span itemprop="name">Reading</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img src="Taylor.G.I/Taylor.png" alt="Taylor"></p>
<blockquote>
<p>一句名言，表明泰勒逝世后其成就仍影响深远</p>
</blockquote>
<p>杰弗里·泰勒（Geoffrey Ingram Taylor, 1886年3月7日－1975年6月27日），英国物理学家，数学家。他研究的领域是流体动力学与波理论。暂且参考维基百科，后续会按照自己了解泰勒的过程书写。该文是用于测试长文本博客的排布是否美观。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/04/12/Taylor.G.I/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://nchilton.github.io/2019/04/08/LAMMPS-Performance/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Chilton">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="李杜醉酒">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/08/LAMMPS-Performance/" class="post-title-link" itemprop="url">加速 LAMMPS 运行效率</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-04-08 00:00:00" itemprop="dateCreated datePublished" datetime="2019-04-08T00:00:00+08:00">2019-04-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-03-13 00:00:00" itemprop="dateModified" datetime="2019-03-13T00:00:00+08:00">2019-03-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Tutorial/" itemprop="url" rel="index">
                    <span itemprop="name">Tutorial</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>加速 LAMMPS 运行性能见 <a target="_blank" rel="noopener" href="https://lammps.sandia.gov/doc/Speed.html">Speed</a>。</p>
<p><img src="LAMMPS-Performance/Task.PNG" alt="Windows 下任务管理器"></p>
<!---more--->

<h2 id="CPU-信息"><a href="#CPU-信息" class="headerlink" title="CPU 信息"></a>CPU 信息</h2><p>首先让我们了解 CPU 的几个概念：</p>
<ul>
<li><strong>物理 CPU 个数</strong>：插槽上的 CPU 个数</li>
<li><strong>CPU 核数</strong>：每个物理 CPU 中 core 的个数</li>
<li><strong>逻辑 CPU 个数</strong>：物理 CPU 个数 × 每颗物理 CPU 的核数 × 超线程数</li>
</ul>
<p>如果<strong>逻辑 CPU 个数</strong> = 物理 CPU 个数 × 每颗物理 CPU 的核数，则表示处理器不支持超线程。</p>
<p>在 Linux 查看<strong>物理 CPU 个数</strong> 、<strong>CPU 核数</strong>和<strong>逻辑 CPU 个数</strong>如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/cpuinfo| grep <span class="string">&quot;physical id&quot;</span>| sort| uniq| wc -l <span class="comment"># 物理 CPU 个数</span></span><br><span class="line">cat /proc/cpuinfo| grep <span class="string">&quot;cpu cores&quot;</span>| uniq <span class="comment"># CPU 核数</span></span><br><span class="line">cat /proc/cpuinfo| grep <span class="string">&quot;processor&quot;</span>| wc -l <span class="comment"># 逻辑 CPU 个数</span></span><br></pre></td></tr></table></figure>

<p>在 Windows 下打开<code>任务管理器&gt;性能</code>即可查看 CPU 信息</p>
<p> <img src="LAMMPS-Performance/Windows-CPU.png" alt="Windows CPU"></p>
<p>当然在 Windows 下也可以通过命令行查看 CPU 信息，如下：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wmic </span><br><span class="line">cpu get * </span><br></pre></td></tr></table></figure>

<p>先输入<code>wmic</code>，出现<code>wmic:root\cli&gt;</code>，在<code>&gt;</code>后输入<code>cpu get *</code>，输出信息每一行表示一个物理 CPU 信息。NumberOfCores 表示每个物理 CPU 中 core 的个数，NumberOfLogicalProcessors 表示每个物理 CPU 中逻辑 CPU 个数。</p>
<h2 id="评测-CPU-核心运行-LAMMPS-效率"><a href="#评测-CPU-核心运行-LAMMPS-效率" class="headerlink" title="评测 CPU 核心运行 LAMMPS 效率"></a>评测 CPU 核心运行 LAMMPS 效率</h2><p>在模拟之前通常需要运行比较小的时间步来估算模拟时长，如模拟体系在 1 个或多个线程上运行 100-1000 步，计算其运行时间，进而估计完全模拟完的时间。该种测试建议模拟体系处于平衡态。</p>
<p>在一个（或多个线程）上运行应该可以很好地估计串行性能以及时间步长的哪些部分花费的时间最多。在几个不同的处理器计数上运行相同的问题应该给出并行可伸缩性的估计。即如果模拟在16个处理器上运行速度快16倍，则其100％并行效率;如果它在16个处理器上运行速度提高了8倍，那么它的效率将提高50％。</p>
<p>时序信息中最重要的数据是时序细分和相对百分比。例如，如果只消耗10％的运行时间，尝试使用不同的选项来加速远程求解器几乎没有什么影响。如果成对时间占主导地位，您可能需要查看对样式的GPU或OMP版本，如下所述。比较在增加处理器数量时百分比如何变化，可以让您了解时间步长内不同的操作是如何缩放的。请注意，如果您使用Kspace求解器运行，则Kspace时间的细分会有额外的输出。对于PPPM，这包括在FFT上花费的分数，这可能是通信密集型的。</p>
<p>时序信息中的另一个重要细节是原子计数和邻居计数的直方图。如果处理器之间的差异很大，则会出现负载不平衡问题。这通常会导致相对定时数据不准确，因为处理器必须等待其他处理器进行通信才能赶上。因此，由于负载不平衡，“通信”或“其他”的报告时间可能比实际高。如果这是一个问题，您可以取消注释src / timer.cpp中的MPI_Barrier（）行，并重新编译LAMMPS，以获得同步时序。</p>
<h3 id="效率评测"><a href="#效率评测" class="headerlink" title="效率评测"></a>效率评测</h3><p>以下测试几种状况下的运行效率，以<strong>计算时间/线程程数</strong>作为比较</p>
<ul>
<li>串行<code>lmp_serial -in test.in</code></li>
<li>8 线程并行<code>mpiexec -np 8 lmp_mpi -in test.in</code></li>
<li>16 线程并行<code>mpiexec -np 16 lmp_mpi -in test.in</code></li>
<li>32 线程并行<code>mpiexec -np 32 lmp_mpi -in test.in</code></li>
<li>14 线程并行<code>mpiexec -np 14 lmp_mpi -in test.in</code></li>
<li>28 线程并行<code>mpiexec -np 28 lmp_mpi -in test.in</code></li>
<li></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Chilton"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">Chilton</p>
  <div class="site-description" itemprop="description">好好学习，天天向上</div>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/NChilton" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;NChilton" rel="noopener" target="_blank">GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/chilton-nieh" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;chilton-nieh" rel="noopener" target="_blank">Zhihu</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 2017 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Chilton</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
